<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>todolist</title>
    <script src="https://kit.fontawesome.com/36d59001c2.js" crossorigin="anonymous"></script>
</head>
<style>
    * {
      margin: 0;
      padding: 0;
    }
  </style>
<script src="https://cdn.tailwindcss.com"></script>

<body>
    <!-- 전체박스 -->
    <div class="flex min-h-screen justify-center items-center bg-gradient-to-r from-cyan-500 to-blue-500 p-5 overflow-hidden">
        <!-- 내용박스 -->
        <div class="flex flex-col sm:w-[95%] md:w-[500px] lg:w-[500px] w-[95%] p-7 bg-white rounded-3xl justify-center shadow-xl text-center">
            <!-- 입력부분 -->
            <div>
                <span class="text-3xl font-bold animate-pulse">투두리스트</span>
            </div>
            <div class="mt-5">
                <input class="w-full rounded-2xl shadow-xl border border-gray-300 p-3 outline-none hover:border-blue-300 focus:border-blue-500" placeholder="할 일을 입력하세요." id="todoInput">
            </div>
            <div class="mt-3 rounded-2xl shadow-xl bg-black p-3 text-center bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 hover:from-pink-500 hover:to-orange-500 hover:cursor-pointer" onclick="add()">
                <span class="text-white font-bold">추가하기</span>
            </div>
            <!-- 할일부분 -->
            <div class="mt-7 flex flex-col rounded-2xl p-3 bg-gray-100 border border-gray-300" id="todolistDiv">
                <!-- 할일1 -->
                <div class="flex items-center">
                    <div class="flex-1 text-left pr-4 truncate hover:overflow-visible hover:whitespace-normal">
                        <span class="text-gray-400">Todo List</span>
                    </div>
                    <div class="flex">
                        <div class="px-2 py-1 bg-gray-100 text-gray-400"><i class="fa-solid fa-pencil"></i></div>
                        <div class="px-2 py-1 bg-gray-100 text-gray-400 ml-2"><i class="fa-solid fa-trash"></i></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>

<!-- 입력한 값을 포함한 div를 추가하는 스크립트 -->
<script>
    // 입력값을 가져오고 싶은 input의 id로 접근하여 변수에 넣어둔다.
    const todoInput = document.querySelector("#todoInput")

    // onclock="add()" 로 실행할 함수
    function add() {
        // todoInput에 입력 값 (Value)를 변수에 넣어둔다.
        const todoInputValue = todoInput.value
        // add()를 클릭했을 때 추가할 곳 밖의 div의 id로 접근하여 변수에 넣어둔다.
        const todolistDiv = document.querySelector("#todolistDiv")

        // div구성 : 구성을 엘리먼트를 생성하여 변수에 넣어둔다.
        const outDiv = document.createElement("div")
        // 변수에 클래스를 넣어둔다.
        outDiv.className = "flex border-t border-gray-300 pt-2 mt-2 items-center"

        const todoDiv = document.createElement("div")
        todoDiv.className = "flex-1 text-left pr-4 truncate hover:overflow-visible hover:whitespace-normal"

        const todoSpan = document.createElement("span")
        // 변수에 입력한 텍스트를 넣어둔다.
        todoSpan.innerText = todoInputValue

        const buttonDiv = document.createElement("div")
        buttonDiv.className = "flex"

        const modifyDiv = document.createElement("div")
        modifyDiv.className = "px-2 py-1 bg-blue-600 hover:bg-blue-800 rounded-lg text-white hover:cursor-pointer"

        const modifyI = document.createElement("i")
        modifyI.className = "fa-solid fa-pencil"

        const deleteDiv = document.createElement("div")
        deleteDiv.className = "px-2 py-1 bg-red-600 hover:bg-red-800 rounded-lg text-white ml-2 hover:cursor-pointer"

        const deleteI = document.createElement("i")
        deleteI.className = "fa-solid fa-trash"

        // div를 트리 구성대로 안으로 포함시킨다. Depth가 깊은 것부터 넣는다.
        todoDiv.append(todoSpan)
        modifyDiv.append(modifyI)
        deleteDiv.append(deleteI)
        buttonDiv.append(modifyDiv)
        buttonDiv.append(deleteDiv)
        outDiv.append(todoDiv)
        outDiv.append(buttonDiv)
        // 추가할 div 변수에 완성된 구조를 넣는다.
        todolistDiv.append(outDiv)

        // 삭제 구현
        function removed() {
            outDiv.remove()
        }
        deleteDiv.addEventListener("click", removed)

        // 수정 구현
        function modified() {
            if (modifyI.classList.contains("fa-pencil")) {
                // 수정 input 생성
                const modifyInput = document.createElement("input")
                modifyInput.value = todoSpan.innerText
                modifyInput.className = "w-full rounded-xl border border-gray-300 px-2 py-1"
                // modifyI 를 연필에서 체크로 변경
                modifyI.className = "fa-solid fa-check w-[16px]"
                // todoSpan 를 modifyInput 으로 교체
                todoDiv.replaceChild(modifyInput, todoSpan)
            }
            else if (modifyI.classList.contains('fa-check')) {
                // input 을 변수에 저장 
                const modifyInput = todoDiv.querySelector("input")
                // 수정 입력값 저장
                todoSpan.innerText = modifyInput.value
                // modifyI 를 체크에서 연필로 변경
                modifyI.className = "fa-solid fa-pencil"
                // modifyInput 을 modifiedContent 로 교체
                todoDiv.replaceChild(todoSpan, modifyInput)
            }
        }
        modifyDiv.addEventListener("click", modified)
    }  
</script>
</html>